const {
  GoogleGenerativeAI,
  HarmCategory,
  HarmBlockThreshold,
} = require("@google/generative-ai");

const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 64,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  // safetySettings: Adjust safety settings
  // See https://ai.google.dev/gemini-api/docs/safety-settings
  history: [
    {
      role: "user",
      parts: [
        {text: "Generate travel plan for location New York, USA for one day and one night for family with a luxury budget with the flight details, flight price, and booking URL. Hotels options list with hotel name, hotel address, price, hotel image, URL, geo-coordinates, rating, description, and places to visit nearby with place names, place details, place image URL, geo-coordinates, ticket pricing, time travel, each of the location for one day and one night with each day plan and best time to visit in JSON file.\n"},
      ],
    },
    {
      role: "model",
      parts: [
        {text: "```json\n{\n  \"trip\": {\n    \"destination\": \"New York City, USA\",\n    \"duration\": \"1 day, 1 night\",\n    \"budget\": \"luxury\",\n    \"flight\": {\n      \"details\": \"Round-trip flight from [Your Departure City] to New York City (JFK/LGA/EWR)\",\n      \"price\": \"Varies based on origin and time of year - check flight aggregators\",\n      \"booking_url\": \"https://www.google.com/flights\" \n    },\n    \"hotel\": [\n      {\n        \"name\": \"The Mark Hotel\",\n        \"address\": \"25 East 77th Street, New York, NY 10075\",\n        \"price\": \"Starting from $1,500 per night\",\n        \"image_url\": \"https://www.themarkhotel.com/images/gallery/hero-image.jpg\",\n        \"url\": \"https://www.themarkhotel.com/\",\n        \"geo_coordinates\": \"40.7723, -73.9631\",\n        \"rating\": \"5 stars\",\n        \"description\": \"An iconic Upper East Side hotel with opulent suites, a Michelin-starred restaurant, and a world-class spa.\",\n        \"nearby_places\": [\n          {\n            \"name\": \"Metropolitan Museum of Art\",\n            \"details\": \"One of the world's largest and most comprehensive art museums.\",\n            \"image_url\": \"https://www.metmuseum.org/sites/default/files/styles/image_page_hero_image/public/images/pages/2022/february/2022_02_28_MET_Homepage_Main_Image-01.jpg?itok=N44c2L7d\",\n            \"geo_coordinates\": \"40.7815, -73.9632\",\n            \"ticket_pricing\": \"Suggested donation: $25 per adult\",\n            \"time_travel\": \"10 minutes walk\"\n          },\n          {\n            \"name\": \"Central Park\",\n            \"details\": \"A sprawling urban oasis with walking paths, gardens, and attractions.\",\n            \"image_url\": \"https://www.centralparknyc.org/sites/default/files/styles/feature_image_full_width/public/images/2016-08-16-Central-Park-New-York-City-DSC_0003.jpg?itok=G_jZ9J_s\",\n            \"geo_coordinates\": \"40.7829, -73.9654\",\n            \"ticket_pricing\": \"Free\",\n            \"time_travel\": \"15 minutes walk\"\n          }\n        ]\n      },\n      {\n        \"name\": \"The Peninsula New York\",\n        \"address\": \"700 Fifth Avenue, New York, NY 10019\",\n        \"price\": \"Starting from $1,200 per night\",\n        \"image_url\": \"https://www.peninsula.com/en/new-york/gallery/hotel-gallery/hero-image.jpg\",\n        \"url\": \"https://www.peninsula.com/en/new-york/\",\n        \"geo_coordinates\": \"40.7580, -73.9739\",\n        \"rating\": \"5 stars\",\n        \"description\": \"A luxurious hotel with stunning views of Central Park, fine dining, and elegant accommodations.\",\n        \"nearby_places\": [\n          {\n            \"name\": \"Rockefeller Center\",\n            \"details\": \"A complex of art deco skyscrapers with observation decks, shops, and restaurants.\",\n            \"image_url\": \"https://www.rockefellercenter.com/sites/default/files/styles/hero_image_desktop/public/hero-images/rockefeller-center-christmas-tree-2023-2.jpg?itok=nU2q_5uX\",\n            \"geo_coordinates\": \"40.7580, -73.9775\",\n            \"ticket_pricing\": \"Varies depending on attraction\",\n            \"time_travel\": \"5 minutes walk\"\n          },\n          {\n            \"name\": \"St. Patrick's Cathedral\",\n            \"details\": \"A grand neo-Gothic cathedral with stunning architecture and stained glass windows.\",\n            \"image_url\": \"https://www.stpatrickscathedral.org/sites/default/files/styles/hero_image/public/images/hero/Exterior%20-%20St.%20Patrick%27s%20Cathedral%20-%20NYC%20-%202022-12-21%20-%2003.jpg?itok=hY_O0n6C\",\n            \"geo_coordinates\": \"40.7580, -73.9775\",\n            \"ticket_pricing\": \"Free\",\n            \"time_travel\": \"5 minutes walk\"\n          }\n        ]\n      }\n    ],\n    \"day_plan\": [\n      {\n        \"day\": \"Day 1\",\n        \"schedule\": [\n          {\n            \"time\": \"Morning (9:00 AM - 12:00 PM)\",\n            \"activity\": \"Start your day with a luxurious breakfast at your hotel. Then, head to the Metropolitan Museum of Art for a curated tour of art masterpieces. Immerse yourselves in various art forms from around the world.\",\n            \"details\": \"Experience the Metropolitan Museum of Art, a treasure trove of art history, with a guided tour to delve deeper into its vast collection. From ancient Egyptian artifacts to modern masterpieces, it's a feast for the eyes and mind.\",\n            \"location\": \"Metropolitan Museum of Art\",\n            \"image_url\": \"https://www.metmuseum.org/sites/default/files/styles/image_page_hero_image/public/images/pages/2022/february/2022_02_28_MET_Homepage_Main_Image-01.jpg?itok=N44c2L7d\",\n            \"geo_coordinates\": \"40.7815, -73.9632\",\n            \"ticket_pricing\": \"Suggested donation: $25 per adult\",\n            \"time_travel\": \"10 minutes walk\"\n          },\n          {\n            \"time\": \"Afternoon (12:00 PM - 3:00 PM)\",\n            \"activity\": \"Enjoy a gourmet lunch at a Michelin-starred restaurant in the city. Then, explore the captivating world of Central Park. Take a leisurely stroll, rent a bike, or enjoy a horse-drawn carriage ride.\",\n            \"details\": \"Indulge in a delectable culinary experience at a renowned Michelin-starred restaurant in New York City. Then, unwind in the serene embrace of Central Park.  Discover its hidden gems, from the Bethesda Terrace to Strawberry Fields.\",\n            \"location\": \"Central Park\",\n            \"image_url\": \"https://www.centralparknyc.org/sites/default/files/styles/feature_image_full_width/public/images/2016-08-16-Central-Park-New-York-City-DSC_0003.jpg?itok=G_jZ9J_s\",\n            \"geo_coordinates\": \"40.7829, -73.9654\",\n            \"ticket_pricing\": \"Free\",\n            \"time_travel\": \"15 minutes walk\"\n          },\n          {\n            \"time\": \"Evening (6:00 PM - 9:00 PM)\",\n            \"activity\": \"Experience a Broadway show, renowned for its dazzling performances and captivating stories. Afterward, indulge in a luxurious dinner at a top-rated restaurant with stunning city views.\",\n            \"details\": \"Catch a Broadway show, a true icon of New York City's vibrant theater scene. Afterward, enjoy a memorable dining experience at a renowned restaurant with panoramic city views. \",\n            \"location\": \"Broadway, NYC\",\n            \"image_url\": \"https://www.playbill.com/sites/default/files/styles/medium/public/images/2017-09/hamilton_poster_2017_10_25.jpg?itok=h978s98Q\",\n            \"geo_coordinates\": \"40.7577, -73.9857\",\n            \"ticket_pricing\": \"Varies depending on show and seat\",\n            \"time_travel\": \"30 minutes walk\"\n          }\n        ]\n      },\n      {\n        \"day\": \"Day 2\",\n        \"schedule\": [\n          {\n            \"time\": \"Morning (9:00 AM - 12:00 PM)\",\n            \"activity\": \"Start your day with a revitalizing session at your hotel's spa, followed by a delightful breakfast. Afterward, explore the iconic Rockefeller Center and its observation decks for breathtaking city views.\",\n            \"details\": \"Enjoy a rejuvenating spa experience at your hotel, followed by a delicious breakfast. Then, head to the Rockefeller Center, a marvel of Art Deco architecture, and ascend to the top for panoramic views of the city. \",\n            \"location\": \"Rockefeller Center\",\n            \"image_url\": \"https://www.rockefellercenter.com/sites/default/files/styles/hero_image_desktop/public/hero-images/rockefeller-center-christmas-tree-2023-2.jpg?itok=nU2q_5uX\",\n            \"geo_coordinates\": \"40.7580, -73.9775\",\n            \"ticket_pricing\": \"Varies depending on attraction\",\n            \"time_travel\": \"5 minutes walk\"\n          },\n          {\n            \"time\": \"Afternoon (12:00 PM - 3:00 PM)\",\n            \"activity\": \"Enjoy a gourmet lunch at a restaurant near Rockefeller Center. Then, immerse yourselves in the artistic world of the Museum of Modern Art (MoMA), where you'll encounter iconic works by renowned artists.\",\n            \"details\": \"Enjoy a delightful lunch at a nearby restaurant. Afterwards, delve into the world of modern art at the Museum of Modern Art (MoMA), experiencing masterpieces by Picasso, Van Gogh, and other greats.\",\n            \"location\": \"Museum of Modern Art (MoMA)\",\n            \"image_url\": \"https://www.moma.org/images/collection/images/11081_1216.jpg\",\n            \"geo_coordinates\": \"40.7614, -73.9772\",\n            \"ticket_pricing\": \"Suggested donation: $25 per adult\",\n            \"time_travel\": \"10 minutes walk\"\n          },\n          {\n            \"time\": \"Evening (6:00 PM - 9:00 PM)\",\n            \"activity\": \"Have a farewell dinner at a top-rated restaurant with breathtaking views of the city skyline. Enjoy a memorable dining experience, reflecting on your luxurious New York City adventure. \",\n            \"details\": \"Savour a final farewell dinner at one of New York's finest restaurants, indulging in exceptional cuisine while enjoying stunning city views.  Relive the highlights of your luxurious journey.\",\n            \"location\": \"Top of the Rock or One World Observatory\",\n            \"image_url\": \"https://www.topoftheRockNYC.com/sites/default/files/styles/hero_image_desktop/public/hero-images/top-of-the-rock-2023-hero-5.jpg?itok=bU9W8_1O\",\n            \"geo_coordinates\": \"40.7580, -73.9775\",\n            \"ticket_pricing\": \"Varies depending on restaurant and view\",\n            \"time_travel\": \"10 minutes walk\"\n          }\n        ]\n      }\n    ],\n    \"best_time_to_visit\": \"Spring (April-May) and Fall (September-October) offer pleasant weather and fewer crowds.\"\n  }\n}\n```\n\n**Please Note:**\n\n* **Flight Prices:** The flight price is highly variable depending on your departure city, time of year, and flight availability. You'll need to use a flight aggregator like Google Flights or Skyscanner to get an accurate price.\n* **Hotel Prices:** The prices provided are starting prices and can fluctuate based on demand and availability. \n* **Attractions and Activities:** This plan provides a framework; you can customize it further based on your family's interests. Consider adding more activities like a visit to the Empire State Building, the Statue of Liberty, or a Broadway show. \n* **Food:** This plan outlines some gourmet options, but New York offers a diverse culinary landscape. You can choose to enjoy other cuisines based on your preferences.\n\n**Enjoy your luxurious New York City adventure!** \n"},
      ],
    },
  ],
});

// const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
// console.log(result.response.text());
